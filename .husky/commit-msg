###
 # @FilePath: /AutoAPIGen/.husky/commit-msg
 # @Description: 
### 
# 检查提交信息格式 (Conventional Commits)
commit_regex='^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo "❌ 提交信息格式不正确！"
    echo "请使用以下格式："
    echo "  feat: 新功能"
    echo "  fix: 修复bug"
    echo "  docs: 文档更新"
    echo "  style: 代码格式化"
    echo "  refactor: 重构代码"
    echo "  test: 测试相关"
    echo "  chore: 构建过程或辅助工具的变动"
    echo "  perf: 性能优化"
    echo "  ci: CI配置文件和脚本的变动"
    echo "  build: 影响构建系统或外部依赖的更改"
    echo "  revert: 回滚之前的提交"
    echo ""
    echo "示例: feat: 添加用户登录功能"
    echo "示例: fix(auth): 修复登录验证问题"
    exit 1
fi